# bitly-php

[![packagist](https://img.shields.io/packagist/v/bitly/sdk)](https://packagist.org/packages/bitly/sdk)
[![build](https://github.com/bitly-community/bitly-php/actions/workflows/build.yml/badge.svg)](https://github.com/bitly-community/bitly-php/actions/workflows/build.yml)
[![test](https://github.com/bitly-community/bitly-php/actions/workflows/test.yml/badge.svg)](https://github.com/bitly-community/bitly-php/actions/workflows/test.yml)

PHP library for [Bitly](https://dev.bitly.com/docs/sdks/openapi-30/). Code is generated using the [OpenAPI spec](https://dev.bitly.com/v4/v4.json).

## Requirements

### Version

PHP >=8.0

### API Key

Generate your [access token](https://app.bitly.com/settings/api/).

## Install

Install with [Composer](http://getcomposer.org/):

```sh
composer require bitly/sdk
```

Use Composer's [autoload](https://getcomposer.org/doc/01-basic-usage.md#autoloading):

```php
require_once 'vendor/autoload.php';
```

## Usage

Instantiate the client:

```php
use Bitly\Bitly;

$bitly = new Bitly('YOUR_API_KEY', 'YOUR_API_URL');

$client = $bitly->client;
```

Or create a custom client:

```php
use Bitly\Client;

$httpClient = \Http\Discovery\Psr18ClientDiscovery::find();
$uri = \Http\Discovery\Psr17FactoryDiscovery::findUriFactory()->createUri('YOUR_API_URL');
$bearer = new \Http\Message\Authentication\Bearer('YOUR_API_KEY');
$plugins = [
    new \Http\Client\Common\Plugin\AddHostPlugin($uri),
    new \Http\Client\Common\Plugin\AuthenticationPlugin($bearer),
];
$httpClient = new \Http\Client\Common\PluginClient($httpClient, $plugins);

$client = Client::create($httpClient);
```

Add a pet:

```php
use Bitly\Bitly;
use Bitly\Model\Pet;

$bitly = new Bitly('YOUR_API_KEY');

$pet = new Pet();
$pet->setName('Neo');
$pet->setPhotoUrls(['https://placecats.com/neo/300/200']);
$response = $bitly->client->addPet($pet);
```

Handle an API error:

```php
use Bitly\Bitly;

$bitly = new Bitly('YOUR_API_KEY');

try {
    $bitly->client->getPetById(0);
} catch (Throwable $exception) {
    echo $exception->getMessage();
    echo $exception->getCode();
}
```

## Scripts

### `composer build`

Generate the code:

```sh
composer build
```

### `composer clean`

Delete the `lib/` directory:

```sh
composer clean
```

### `composer test`

Run the tests:

```sh
composer test
```

## About This Package

This package is automatically generated by [Jane](https://github.com/janephp/janephp).
